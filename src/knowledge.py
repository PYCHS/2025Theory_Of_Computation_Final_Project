# src/knowledge.py

def get_gottman_info():
    return """
### 🛡️ 模型二：Gottman 末日四騎士 (The Four Horsemen)
這些是預測關係破裂的四種危險溝通模式：

1. **⚔️ 批評 (Criticism)**
   - **定義**：不只是抱怨，而是對伴侶性格的人身攻擊（對人不對事）。
   - **例子**：「你真自私，從來沒考慮過我！」
   - **嚴重性**：它是衝突的開端，會讓對方感到被拒絕和受傷，為接下來的防衛鋪路。
   - ✅ **解藥**：溫柔的開始 (Gentle Start-Up)。使用「我訊息」：描述感受 + 具體事件 + 需要，不帶指責。

2. **😒 輕蔑 (Contempt)**
   - **定義**：覺得自己高人一等，透過諷刺、嘲笑、翻白眼來貶低對方。
   - **例子**：「你又忘了？這種事都做不到真的沒救了（翻白眼）」
   - **嚴重性**：這是預測離婚/分手的最準確指標。
   - ✅ **解藥**：建立欣賞的文化。每天找出對方值得讚賞的小事。

3. **🛡️ 防衛 (Defensiveness)**
   - **定義**：面對批評時，急著否認、找藉口或反擊，像是在說「這不是我的錯，是你的錯」。
   - **例子**：「我沒洗碗是因為我很忙好嗎！你昨天不也沒倒垃圾？憑什麼說我？」
   - **嚴重性**：這會阻礙問題的解決，讓衝突變成互丟泥巴，雙方都覺得自己沒被聽見。
   - ✅ **解藥**：承擔責任 (Take Responsibility)。承認自己哪怕只有一小部分的錯誤。

4. **🧱 築高牆 (Stonewalling)**
   - **定義**：拒絕溝通，轉身離開，冷戰，假裝忙碌，讓對方感到完全被阻絕。
   - **例子**：當伴侶在說話時，盯著手機一言不發，或直接走出房間甩上門。
   - **嚴重性**：這通常發生在情緒過度淹沒 (Flooding) 之後。一方築牆通常只會讓另一方更焦慮憤怒。
   - ✅ **解藥**：自我安撫 (Self-Soothing)。暫時喊停，休息 20 分鐘讓情緒冷靜。
"""

def get_attachment_info():
    return """
### 🧬 模型一：依附理論 (Attachment Theory)
這解釋了我們如何在愛中尋找安全感：

1. **🟢 安全型依附 (Secure)**
   - **特徵**：相信自己值得被愛，也信任伴侶。情緒穩定，能給予支持也能接受安慰。
   - **例子**：「我這幾天比較忙，可能回訊息慢一點，但我還是很愛你喔。」（能清晰表達需求而不帶恐懼）
   - **應對**：能自在表達需求與感受，願意靠近也能獨立。與安全型的人交往應持續保持開放溝通，建立深層信任。

2. **🟡 焦慮型依附 (Anxious)**
   - **特徵**：極度渴望親密，但總擔心被拋棄。對伴侶的情緒變化非常敏感（如：已讀不回就焦慮）。
   - **例子**：「你今天怎麼沒回我訊息？是不是不愛我了？」（經常需要伴侶的保證）
   - **應對**：需要頻繁的情感確認與安撫，適時告訴他們「我在這裡，我沒有要離開」。

3. **🔵 迴避型依附 (Avoidant)**
   - **特徵**：害怕親密，習慣保持距離。遇到衝突傾向逃避或築牆，覺得靠自己最安全。
   - **例子**：「我現在不想談這個，我需要一點空間。」（避免深入情感交流）
   - **應對**：需要個人空間，不要強迫他們立刻表態，採用「軟性」的方式溝通，避免讓他們感到被情緒勒索。

4. **🔴 混亂型依附 (Disorganized)**
   - **特徵**：既想靠近又害怕受傷，行為矛盾反覆。通常源於過去的創傷經驗（如家庭暴力或忽視）。
   - **例子**：前一刻很黏人說「不要離開我」，下一刻又突然推開對方說「我不值得被愛，你走吧」。
   - **應對**：建立穩定且界線清晰的環境。這種類型通常最需要耐心，建議尋求專業諮商協助，練習情緒調節與創傷修復。
"""

def get_concept_guide():
    """ 產生放在報告最前面的導讀 """
    return "# 📖 情感關係心理學分析報告\n" + \
           "> 在閱讀您的專屬分析報告之前，請先花 3 分鐘了解我們使用的分析模型，這能幫助您更清楚自己的處境。\n" + \
           get_attachment_info() + \
           "\n" + \
           get_gottman_info() + \
           "\n" + "="*60 + "\n"  # 分隔線，下面接正式報告